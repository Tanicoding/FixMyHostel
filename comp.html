<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FixMyHostel - Complaint Management</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    .contact-section {
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.05);
      margin: 3rem auto;
      width: 90%;
    }

    .contact-section h3 {
      color: #556B2F;
      margin-bottom: 1rem;
      font-weight: 600;
      text-align: center;
    }

    .contact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 1rem;
    }

    .contact-card {
      background-color: #F2F5F1;
      border-left: 5px solid #6B8E23;
      padding: 1rem;
      border-radius: 8px;
      transition: transform 0.3s;
    }

    .contact-card:hover {
      transform: translateY(-5px);
    }

    .contact-card h4 {
      color: #3F5320;
      margin-bottom: 0.5rem;
    }

    .contact-card p {
      font-size: 0.9rem;
      color: #444;
      line-height: 1.5;
    }
  </style>
</head>
<body>

  <nav class="navbar">
    <div class="logo">FixMyHostel</div>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="dashb.html">Dashboard</a>
      <a href="comp.html" class="active">Complaint</a>
      <a href="status.html">Status</a>
      <a href="reviews.html">Reviews</a>
      <a href="login.html" class="login-btn">Logout</a>
    </div>
  </nav>

  <section class="complaint-info">
    <div class="info-content">
      <h2>Smart Complaint Management for Your Hostel</h2>
      <p>
        FixMyHostel‚Äôs Complaint Management System helps hostel residents raise, monitor, 
        and resolve issues efficiently. It ensures transparent communication between students 
        and the administration for a better hostel experience.
      </p>
      <ul class="benefits">
        <li>‚úÖ Quick and simple complaint submission</li>
        <li>‚öôÔ∏è Category-based sorting for faster handling</li>
        <li>üìä Real-time tracking and status updates</li>
        <li>üîî Automated reminders and notifications</li>
      </ul>
    </div>
    <div class="info-image">
      <img src="Screenshot 2025-10-29 at 17.44.06.png" alt="Complaint Management Dashboard">
    </div>
  </section>

  <section class="how-it-works">
    <h2>How It Works</h2>
    <div class="steps-grid">
      <div class="step-card">
        <h3>1. Submit Complaint</h3>
        <p>Students fill out a simple form describing their issue and select a category like Maintenance or Food.</p>
      </div>
      <div class="step-card">
        <h3>2. Admin Review</h3>
        <p>The hostel admin reviews the complaint, assigns it to the concerned department, and updates its status.</p>
      </div>
      <div class="step-card">
        <h3>3. Resolution & Feedback</h3>
        <p>Once resolved, students are notified and can provide feedback to help improve hostel services.</p>
      </div>
    </div>
  </section>

  <div class="container">
    <div class="complaint-form">
  <h3>Submit a Complaint</h3>
  <form id="complaintForm">
    <input type="text" id="title" placeholder="Complaint Title" required>
    <textarea id="desc" rows="5" placeholder="Describe your issue..." required></textarea>
    <select id="category" required>
      <option value="" disabled selected>Category</option>
      <option>Room Issue</option>
      <option>Mess / Food</option>
      <option>Maintenance</option>
      <option>Other</option>
    </select>

    <!-- üëá New: Image Upload -->
    <label for="imageUpload" style="font-weight:500; margin-top:1rem; display:block;">Attach Image (optional)</label>
    <input type="file" id="imageUpload" accept="image/*" style="margin-bottom:1rem;">
    <div id="imagePreview" style="margin-bottom:1rem;"></div>

    <button type="submit">Submit Complaint</button>
  </form>
</div>


    <div class="recent-complaints">
      <h3>Recent Complaints</h3>
      <div class="complaint-card">
        <h4>Leaky Faucet</h4>
        <p>Category: Maintenance</p>
        <p>Date: 22 Oct 2025</p>
        <p>Status: <span class="status status-inprogress">In Progress</span></p>
      </div>
      <div class="complaint-card">
        <h4>Room Heater Not Working</h4>
        <p>Category: Room Issue</p>
        <p>Date: 20 Oct 2025</p>
        <p>Status: <span class="status status-pending">Pending</span></p>
      </div>
      <div class="complaint-card">
        <h4>Mess Food Quality</h4>
        <p>Category: Mess / Food</p>
        <p>Date: 18 Oct 2025</p>
        <p>Status: <span class="status status-resolved">Resolved</span></p>
      </div>
    </div>
  </div>

  <!-- üëá NEW CONTACT SECTION -->
  <section class="contact-section">
    <h3>Contact Warden & Staff üìû</h3>
    <div class="contact-grid">
      <div class="contact-card">
        <h4>üè¢ Warden</h4>
        <p><b>Name:</b> Mr. Rajesh Sharma<br>
        <b>Phone:</b> +91 98765 12345<br>
        <b>Email:</b> warden@fixmyhostel.com<br>
        <b>Available:</b> 9 AM ‚Äì 8 PM</p>
      </div>
      <div class="contact-card">
        <h4>‚ö° Electrician</h4>
        <p><b>Name:</b> Sunil Kumar<br>
        <b>Phone:</b> +91 99999 54321<br>
        <b>Available:</b> 9 AM ‚Äì 6 PM</p>
      </div>
      <div class="contact-card">
        <h4>üö∞ Plumber</h4>
        <p><b>Name:</b> Anil Mehta<br>
        <b>Phone:</b> +91 88888 43210<br>
        <b>Available:</b> 10 AM ‚Äì 5 PM</p>
      </div>
      <div class="contact-card">
        <h4>üçõ Mess Supervisor</h4>
        <p><b>Name:</b> Ritu Verma<br>
        <b>Phone:</b> +91 77777 23456<br>
        <b>Email:</b> mess@fixmyhostel.com</p>
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-inline">
      <p>¬© 2025 FixMyHostel ‚Äî Making Hostels Smarter</p>
      <p>Made with ‚ù§Ô∏è by <strong>Team OnlyCodes</strong></p>
      <p>Contact Us: 
        <a href="mailto:contact@fixmyhostel.com">contact@fixmyhostel.com</a> | 
        <a href="tel:+919876543210">+91 98765 43210</a>
      </p>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', loadComplaints);
    localStorage.clear(); // demo only, remove later

    document.querySelector('form').addEventListener('submit', function (e) {
      e.preventDefault();
      const title = this.querySelector('input').value.trim();
      const description = this.querySelector('textarea').value.trim();
      const category = this.querySelector('select').value;

      if (!title || !description || !category) {
        alert('‚ö†Ô∏è Please fill in all fields!');
        return;
      }

      const priority = getPriorityLevel(title + " " + description);
      const complaintID = "CMP-" + Math.floor(100000 + Math.random() * 900000);

      const newComplaint = {
        id: Date.now(),
        complaintID,
        title,
        description,
        category,
        priority,
        date: new Date().toLocaleDateString('en-IN'),
        status: 'Pending'
      };

      const complaints = JSON.parse(localStorage.getItem('complaints') || '[]');
      complaints.unshift(newComplaint);
      localStorage.setItem('complaints', JSON.stringify(complaints));

      alert(`‚úÖ Complaint submitted!\nComplaint ID: ${complaintID}\nPriority: ${priority}`);
      this.reset();
      loadComplaints();
    });

    function getPriorityLevel(text) {
      text = text.toLowerCase();
      const highKeywords = ['fire', 'burning', 'smoke', 'gas leak', 'electric', 'shock', 'short circuit', 'urgent'];
      const mediumKeywords = ['food', 'wifi', 'cleaning', 'dirty', 'slow', 'noise'];
      const normalKeywords = ['suggestion', 'feedback', 'request'];
      if (highKeywords.some(k => text.includes(k))) return 'High';
      if (mediumKeywords.some(k => text.includes(k))) return 'Medium';
      if (normalKeywords.some(k => text.includes(k))) return 'Normal';
      return 'Medium';
    }

    function loadComplaints() {
      const complaints = JSON.parse(localStorage.getItem('complaints') || '[]');
      const container = document.querySelector('.recent-complaints');
      if (complaints.length > 0) {
        container.innerHTML = `<h3>Recent Complaints</h3>` +
          complaints.map(c => `
            <div class="complaint-card">
              <h4>${c.title}</h4>
              <p>Category: ${c.category}</p>
              <p>Date: ${c.date}</p>
              <p><strong>ID:</strong> ${c.complaintID}</p>
              <p><strong>Priority:</strong> <span class="priority ${c.priority.toLowerCase()}">${c.priority}</span></p>
              <p>Status: <span class="status status-${c.status.toLowerCase()}">${c.status}</span></p>
            </div>
          `).join('');
      }
    }

    // Image preview
const imageInput = document.getElementById('imageUpload');
const imagePreview = document.getElementById('imagePreview');
let uploadedImage = "";

imageInput.addEventListener('change', function () {
  const file = this.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function (e) {
      uploadedImage = e.target.result;
      imagePreview.innerHTML = `<img src="${uploadedImage}" style="width:100%; max-width:200px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1);">`;
    };
    reader.readAsDataURL(file);
  }
});

// Modify your existing submit listener
document.getElementById('complaintForm').addEventListener('submit', function (e) {
  e.preventDefault();

  const title = document.getElementById('title').value.trim();
  const description = document.getElementById('desc').value.trim();
  const category = document.getElementById('category').value;

  if (!title || !description || !category) {
    alert('‚ö†Ô∏è Please fill in all fields!');
    return;
  }

  const priority = getPriorityLevel(title + " " + description);
  const complaintID = "CMP-" + Math.floor(100000 + Math.random() * 900000);

  const newComplaint = {
    id: Date.now(),
    complaintID,
    title,
    description,
    category,
    priority,
    image: uploadedImage || "",
    date: new Date().toLocaleDateString('en-IN'),
    status: 'Pending'
  };

  const complaints = JSON.parse(localStorage.getItem('complaints') || '[]');
  complaints.unshift(newComplaint);
  localStorage.setItem('complaints', JSON.stringify(complaints));

  alert(`‚úÖ Complaint submitted!\nComplaint ID: ${complaintID}\nPriority: ${priority}`);
  this.reset();
  uploadedImage = "";
  imagePreview.innerHTML = "";
  loadComplaints();
});

// Update your loadComplaints() function to display image
function loadComplaints() {
  const complaints = JSON.parse(localStorage.getItem('complaints') || '[]');
  const container = document.querySelector('.recent-complaints');

  if (complaints.length > 0) {
    container.innerHTML = `<h3>Recent Complaints</h3>` +
      complaints.map(c => `
        <div class="complaint-card">
          <h4>${c.title}</h4>
          <p>Category: ${c.category}</p>
          <p>Date: ${c.date}</p>
          ${c.image ? `<img src="${c.image}" style="width:100%;max-width:200px;border-radius:6px;margin-top:6px;">` : ""}
          <p><strong>ID:</strong> ${c.complaintID}</p>
          <p><strong>Priority:</strong> <span class="priority ${c.priority.toLowerCase()}">${c.priority}</span></p>
          <p>Status: <span class="status status-${c.status.toLowerCase()}">${c.status}</span></p>
        </div>
      `).join('');
  }
}

  </script>

</body>
</html>
